webpackJsonp([3],{117:function(t,e,i){e=t.exports=i(3)(void 0),e.push([t.i,".schedule-list-wrapper{position:relative;opacity:1}.schedule-list-wrapper tbody td{cursor:pointer}.schedule-list-wrapper .loader{visibility:hidden;opacity:0;-webkit-transition:opacity .3s linear;transition:opacity .3s linear;position:absolute;top:45px;width:100%}.schedule-list-wrapper.loading .loader{visibility:visible;opacity:1;z-index:100}.schedule-list-wrapper.loading .vuetable{opacity:.3}",""])},120:function(t,e,i){e=t.exports=i(3)(void 0),e.push([t.i,"[v-cloak]{display:none}.vuetable th.sortable:hover{color:#2185d0;cursor:pointer}.vuetable-actions{width:15%;padding:12px 0;text-align:center}.vuetable-pagination{background:#f9fafb!important}.vuetable-pagination-info{margin-top:auto;margin-bottom:auto}",""])},159:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{class:["vuetable",t.css.tableClass]},[i("thead",[i("tr",[t._l(t.fields,function(e){return[e.visible?[t.isSpecialField(e.name)?["__checkbox"==t.extractName(e.name)?i("th",{class:["vuetable-th-checkbox-"+t.trackBy,e.titleClass]},[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.checkCheckboxesState(e.name)},on:{change:function(i){t.toggleAllCheckboxes(e.name,i)}}})]):t._e(),t._v(" "),"__component"==t.extractName(e.name)?i("th",{class:["vuetable-th-component-"+t.trackBy,e.titleClass,{sortable:t.isSortable(e)}],on:{click:function(i){t.orderBy(e,i)}}},[t._v("\n                "+t._s(e.title||"")+"\n                "),t.isInCurrentSortGroup(e)&&e.title?i("i",{class:t.sortIcon(e),style:{opacity:t.sortIconOpacity(e)}}):t._e()]):t._e(),t._v(" "),"__slot"==t.extractName(e.name)?i("th",{class:["vuetable-th-slot-"+t.extractArgs(e.name),e.titleClass,{sortable:t.isSortable(e)}],on:{click:function(i){t.orderBy(e,i)}}},[t._v("\n                "+t._s(e.title||"")+"\n                "),t.isInCurrentSortGroup(e)&&e.title?i("i",{class:t.sortIcon(e),style:{opacity:t.sortIconOpacity(e)}}):t._e()]):t._e(),t._v(" "),"__sequence"==t.extractName(e.name)?i("th",{class:["vuetable-th-sequence",e.titleClass||""],domProps:{innerHTML:t._s(e.title||"")}}):t._e(),t._v(" "),t.notIn(t.extractName(e.name),["__sequence","__checkbox","__component","__slot"])?i("th",{class:["vuetable-th-"+e.name,e.titleClass||""],domProps:{innerHTML:t._s(e.title||"")}}):t._e()]:[i("th",{class:["vuetable-th-"+e.name,e.titleClass,{sortable:t.isSortable(e)}],attrs:{id:"_"+e.name},on:{click:function(i){t.orderBy(e,i)}}},[t._v("\n              "+t._s(t.getTitle(e))+"Â \n              "),t.isInCurrentSortGroup(e)?i("i",{class:t.sortIcon(e),style:{opacity:t.sortIconOpacity(e)}}):t._e()])]]:t._e()]})],2)]),t._v(" "),i("tbody",{},[t._l(t.tableData,function(e,a){return[i("tr",{class:t.onRowClass(e,a),attrs:{render:t.onRowChanged(e)},on:{dblclick:function(i){t.onRowDoubleClicked(e,i)},click:function(i){t.onRowClicked(e,i)}}},[t._l(t.fields,function(n){return[n.visible?[t.isSpecialField(n.name)?["__sequence"==t.extractName(n.name)?i("td",{class:["vuetable-sequence",n.dataClass],domProps:{innerHTML:t._s(t.tablePagination.from+a)}}):t._e(),t._v(" "),"__handle"==t.extractName(n.name)?i("td",{class:["vuetable-handle",n.dataClass]},[i("i",{class:["sort-handle",t.css.sortHandleIcon]})]):t._e(),t._v(" "),"__checkbox"==t.extractName(n.name)?i("td",{class:["vuetable-checkboxes",n.dataClass]},[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.rowSelected(e,n.name)},on:{change:function(i){t.toggleCheckbox(e,n.name,i)}}})]):t._e(),t._v(" "),"__component"===t.extractName(n.name)?i("td",{class:["vuetable-component",n.dataClass]},[i(t.extractArgs(n.name),{tag:"component",attrs:{"row-data":e,"row-index":a}})],1):t._e(),t._v(" "),"__slot"===t.extractName(n.name)?i("td",{class:["vuetable-slot",n.dataClass]},[t._t(t.extractArgs(n.name),null,{rowData:e,rowIndex:a})],2):t._e()]:[t.hasCallback(n)?i("td",{class:n.dataClass,domProps:{innerHTML:t._s(t.callCallback(n,e))},on:{click:function(i){t.onCellClicked(e,n,i)},dblclick:function(i){t.onCellDoubleClicked(e,n,i)}}}):i("td",{class:n.dataClass,domProps:{innerHTML:t._s(t.getObjectValue(e,n.name,""))},on:{click:function(i){t.onCellClicked(e,n,i)},dblclick:function(i){t.onCellDoubleClicked(e,n,i)}}})]]:t._e()]})],2),t._v(" "),t.useDetailRow?[i("transition",{attrs:{name:t.detailRowTransition}},[t.isVisibleDetailRow(e[t.trackBy])?i("tr",{class:[t.css.detailRowClass],on:{click:function(i){t.onDetailRowClick(e,i)}}},[i("td",{attrs:{colspan:t.countVisibleFields}},[i(t.detailRowComponent,{tag:"component",attrs:{"row-data":e,"row-index":a}})],1)]):t._e()])]:t._e()]})],2)])},staticRenderFns:[]}},163:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12"},[i("div",{class:["schedule-list-wrapper",{loading:t.loading}]},[t._m(0),t._v(" "),i("vuetable",{attrs:{"api-url":"schedule/",css:t.bootstrapStyles,fields:t.columns},on:{"vuetable:loading":function(e){t.loading=!0},"vuetable:loaded":function(e){t.loading=!1},"vuetable:row-clicked":t.onRowClicked}})],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loader"},[i("div",{staticClass:"progress"},[i("div",{staticClass:"progress-bar progress-bar-success progress-bar-striped active",staticStyle:{width:"100%"}})])])}]}},177:function(t,e,i){var a=i(117);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(6)("615aa3a7",a,!0)},180:function(t,e,i){var a=i(120);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(6)("641798b8",a,!0)},49:function(t,e,i){i(180);var a=i(0)(i(54),i(159),null,null);t.exports=a.exports},52:function(t,e,i){i(177);var a=i(0)(i(74),i(163),null,null);t.exports=a.exports},54:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),s=a(n),o=i(27),r=a(o);s.default.use(r.default),e.default={props:{fields:{type:Array,required:!0},loadOnStart:{type:Boolean,default:!0},apiUrl:{type:String,default:""},dataPath:{type:String,default:"data"},paginationPath:{type:[String],default:"links.pagination"},queryParams:{type:Object,default:function(){return{sort:"sort",page:"page",perPage:"per_page"}}},appendParams:{type:Object,default:function(){return{}}},httpOptions:{type:Object,default:function(){return{}}},perPage:{type:Number,default:function(){return 10}},sortOrder:{type:Array,default:function(){return[]}},multiSort:{type:Boolean,default:function(){return!1}},multiSortKey:{type:String,default:"alt"},rowClassCallback:{type:String,default:""},detailRowComponent:{type:String,default:""},detailRowTransition:{type:String,default:""},trackBy:{type:String,default:"id"},css:{type:Object,default:function(){return{tableClass:"ui blue selectable celled stackable attached table",loadingClass:"loading",ascendingIcon:"blue chevron up icon",descendingIcon:"blue chevron down icon",detailRowClass:"vuetable-detail-row",sortHandleIcon:"grey sidebar icon"}}},silent:{type:Boolean,default:!1}},data:function(){return{eventPrefix:"vuetable:",tableData:null,tablePagination:null,currentPage:1,selectedTo:[],visibleDetailRows:[]}},created:function(){this.normalizeFields(),this.loadOnStart&&this.loadData()},computed:{useDetailRow:function(){return this.tableData&&this.tableData[0]&&void 0===this.tableData[0][this.trackBy]?(this.warn('You need to define "detail-row-id" in order for detail-row feature to work!'),!1):""!==this.detailRowComponent},countVisibleFields:function(){return this.fields.filter(function(t){return t.visible}).length}},methods:{normalizeFields:function(){if(void 0===this.fields)return void this.warn('You need to provide "fields" prop.');var t=this,e=void 0;this.fields.forEach(function(i,a){e="string"==typeof i?{name:i,title:t.setTitle(i),titleClass:"",dataClass:"",callback:null,visible:!0}:{name:i.name,title:void 0===i.title?t.setTitle(i.name):i.title,sortField:i.sortField,titleClass:void 0===i.titleClass?"":i.titleClass,dataClass:void 0===i.dataClass?"":i.dataClass,callback:void 0===i.callback?"":i.callback,visible:void 0===i.visible||i.visible},s.default.set(t.fields,a,e)})},setTitle:function(t){return this.isSpecialField(t)?"":this.titleCase(t)},getTitle:function(t){return void 0===t.title?t.name.replace("."," "):t.title},isSpecialField:function(t){return"__"===t.slice(0,2)},titleCase:function(t){return t.replace(/\w+/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},camelCase:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",i=this;return t.split(e).map(function(t){return i.titleCase(t)}).join("")},notIn:function(t,e){return-1===e.indexOf(t)},loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loadSuccess,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.loadFailed;this.fireEvent("loading"),this.httpOptions.params=this.getAllQueryParams(),s.default.http.get(this.apiUrl,this.httpOptions).then(t,e)},loadSuccess:function(t){this.fireEvent("load-success",t);var e=this.transform(t.body);this.tableData=this.getObjectValue(e,this.dataPath,null),this.tablePagination=this.getObjectValue(e,this.paginationPath,null),null===this.tablePagination&&this.warn('vuetable: pagination-path "'+this.paginationPath+'" not found. It looks like the data returned from the sever does not have pagination information or you may have set it incorrectly.'),this.$nextTick(function(){this.fireEvent("pagination-data",this.tablePagination),this.fireEvent("loaded")})},loadFailed:function(t){this.fireEvent("load-error",t),this.fireEvent("loaded")},transform:function(t){return this.parentFunctionExists("transform")?this.$parent.transform.call(this.$parent,t):t},parentFunctionExists:function(t){return""!==t&&"function"==typeof this.$parent[t]},fireEvent:function(t,e){this.$emit(this.eventPrefix+t,e)},warn:function(t){this.silent||console.warn(t)},getAllQueryParams:function(){var t={};t[this.queryParams.sort]=this.getSortParam(),t[this.queryParams.page]=this.currentPage,t[this.queryParams.perPage]=this.perPage;for(var e in this.appendParams)t[e]=this.appendParams[e];return t},getSortParam:function(){return this.sortOrder&&""!=this.sortOrder.field?"function"==typeof this.$parent.getSortParam?this.$parent.getSortParam.call(this.$parent,this.sortOrder):this.getDefaultSortParam():""},getDefaultSortParam:function(){for(var t="",e=0;e<this.sortOrder.length;e++){t+=(void 0===this.sortOrder[e].sortField?this.sortOrder[e].field:this.sortOrder[e].sortField)+"|"+this.sortOrder[e].direction+(e+1<this.sortOrder.length?",":"")}return t},extractName:function(t){return t.split(":")[0].trim()},extractArgs:function(t){return t.split(":")[1]},isSortable:function(t){return!(void 0===t.sortField)},isInCurrentSortGroup:function(t){return!1!==this.currentSortOrderPosition(t)},currentSortOrderPosition:function(t){if(!this.isSortable(t))return!1;for(var e=0;e<this.sortOrder.length;e++)if(this.fieldIsInSortOrderPosition(t,e))return e;return!1},fieldIsInSortOrderPosition:function(t,e){return this.sortOrder[e].field===t.name&&this.sortOrder[e].sortField===t.sortField},orderBy:function(t,e){if(this.isSortable(t)){var i=this.multiSortKey.toLowerCase()+"Key";this.multiSort&&e[i]?this.multiColumnSort(t):this.singleColumnSort(t),this.currentPage=1,this.loadData()}},multiColumnSort:function(t){var e=this.currentSortOrderPosition(t);!1===e?this.sortOrder.push({field:t.name,sortField:t.sortField,direction:"asc"}):"asc"===this.sortOrder[e].direction?this.sortOrder[e].direction="desc":this.sortOrder.splice(e,1)},singleColumnSort:function(t){0===this.sortOrder.length&&this.clearSortOrder(),this.sortOrder.splice(1),this.fieldIsInSortOrderPosition(t,0)?this.sortOrder[0].direction="asc"===this.sortOrder[0].direction?"desc":"asc":this.sortOrder[0].direction="asc",this.sortOrder[0].field=t.name,this.sortOrder[0].sortField=t.sortField},clearSortOrder:function(){this.sortOrder.push({field:"",sortField:"",direction:"asc"})},sortIcon:function(t){var e={},i=this.currentSortOrderPosition(t);return!1!==i&&("asc"==this.sortOrder[i].direction?e[this.css.ascendingIcon]=!0:e[this.css.descendingIcon]=!0),e},sortIconOpacity:function(t){var e=.3,i=this.sortOrder.length,a=this.currentSortOrderPosition(t);return 1-i*e<.3&&(e=.7/(i-1)),1-a*e},hasCallback:function(t){return!!t.callback},callCallback:function(t,e){if(this.hasCallback(t)){if("function"==typeof t.callback)return t.callback(this.getObjectValue(e,t.name));var i=t.callback.split("|"),a=i.shift();if("function"==typeof this.$parent[a]){var n=this.getObjectValue(e,t.name);return i.length>0?this.$parent[a].apply(this.$parent,[n].concat(i)):this.$parent[a].call(this.$parent,n)}return null}},getObjectValue:function(t,e,i){i=void 0===i?null:i;var a=t;if(""!=e.trim()){e.split(".").forEach(function(t){if(null===a||void 0===a[t]||null===a[t])return void(a=i);a=a[t]})}return a},toggleCheckbox:function(t,e,i){var a=i.target.checked,n=this.trackBy;if(void 0===t[n])return void this.warn('__checkbox field: The "'+this.trackBy+'" field does not exist! Make sure the field you specify in "track-by" prop does exist.');var s=t[n];a?this.selectId(s):this.unselectId(s),this.$emit("vuetable:checkbox-toggled",a,t)},selectId:function(t){this.isSelectedRow(t)||this.selectedTo.push(t)},unselectId:function(t){this.selectedTo=this.selectedTo.filter(function(e){return e!==t})},isSelectedRow:function(t){return this.selectedTo.indexOf(t)>=0},rowSelected:function(t,e){var i=this.trackBy,a=t[i];return this.isSelectedRow(a)},checkCheckboxesState:function(t){if(this.tableData){var e=this,i=this.trackBy,a="th.vuetable-th-checkbox-"+i+" input[type=checkbox]",n=document.querySelectorAll(a),s=this.tableData.filter(function(t){return e.selectedTo.indexOf(t[i])>=0});return s.length<=0?(n.forEach(function(t){t.indeterminate=!1}),!1):s.length<this.perPage?(n.forEach(function(t){t.indeterminate=!0}),!0):(n.forEach(function(t){t.indeterminate=!1}),!0)}},toggleAllCheckboxes:function(t,e){var i=this,a=e.target.checked,n=this.trackBy;a?this.tableData.forEach(function(t){i.selectId(t[n])}):this.tableData.forEach(function(t){i.unselectId(t[n])}),this.$emit("vuetable:checkbox-toggled-all",a)},gotoPreviousPage:function(){this.currentPage>1&&(this.currentPage--,this.loadData())},gotoNextPage:function(){this.currentPage<this.tablePagination.last_page&&(this.currentPage++,this.loadData())},gotoPage:function(t){t!=this.currentPage&&t>0&&t<=this.tablePagination.last_page&&(this.currentPage=t,this.loadData())},isVisibleDetailRow:function(t){return this.visibleDetailRows.indexOf(t)>=0},showDetailRow:function(t){this.isVisibleDetailRow(t)||this.visibleDetailRows.push(t)},hideDetailRow:function(t){this.isVisibleDetailRow(t)&&this.visibleDetailRows.splice(this.visibleDetailRows.indexOf(t),1)},toggleDetailRow:function(t){this.isVisibleDetailRow(t)?this.hideDetailRow(t):this.showDetailRow(t)},onRowClass:function(t,e){var i=this.rowClassCallback.trim();return""!==i&&"function"==typeof this.$parent[i]?this.$parent[i].call(this.$parent,t,e):""},onRowChanged:function(t){return this.fireEvent("row-changed",t),!0},onRowClicked:function(t,e){return this.$emit(this.eventPrefix+"row-clicked",t,e),!0},onRowDoubleClicked:function(t,e){this.$emit(this.eventPrefix+"row-dblclicked",t,e)},onDetailRowClick:function(t,e){this.$emit(this.eventPrefix+"detail-row-clicked",t,e)},onCellClicked:function(t,e,i){this.$emit(this.eventPrefix+"cell-clicked",t,e,i)},onCellDoubleClicked:function(t,e,i){this.$emit(this.eventPrefix+"cell-dblclicked",t,e,i)},changePage:function(t){"prev"===t?this.gotoPreviousPage():"next"===t?this.gotoNextPage():this.gotoPage(t)},reload:function(){this.loadData()},refresh:function(){this.currentPage=1,this.loadData()}},watch:{multiSort:function(t,e){!1===t&&this.sortOrder.length>1&&(this.sortOrder.splice(1),this.loadData())}}}},74:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(9);e.default={name:"schedule-list",data:function(){return{loading:!1,columns:[{name:"schedule.id",title:this.$t("ID")},{name:"schedule.caption",title:this.$t("Name"),sortField:"s.caption"},{name:"channel_caption",title:this.$t("Channel"),sortField:"channel_caption"},{name:"schedule.enabled",title:this.$t("Status"),callback:"enabledDisabled"},{name:"device_name",title:this.$t("Device"),sortField:"device_name"},{name:"location_caption",title:this.$t("Location"),sortField:"location_caption"},{name:"schedule.mode.value",title:this.$t("Schedule mode"),callback:"$t"},{name:"schedule.action.caption",title:this.$t("Action"),callback:"$t"},{name:"futureExecution.plannedTimestamp",title:this.$t("Next run date"),callback:"formatDate"},{name:"latestExecution",title:this.$t("The latest execution"),callback:"latestExecution"}],bootstrapStyles:{tableClass:"table table-striped table-hover",ascendingIcon:"glyphicon glyphicon-chevron-up",descendingIcon:"glyphicon glyphicon-chevron-down"}}},methods:{formatDate:function(t){return t?moment(t).format("LLL"):"-"},latestExecution:function(t){return t?'<span class="'+(t.failed?"text-danger":"text-success")+'" title="'+this.$t(t.result.caption)+'">\n                            '+this.formatDate(t.resultTimestamp)+"\n                        </span>":"-"},enabledDisabled:function(t){return t?'<span class="label label-success">'+this.$t("ENABLED")+"</span>":'<span class="label label-danger">'+this.$t("DISABLED")+"</span>"},onRowClicked:function(t){window.location.href=(0,a.withBaseUrl)("/schedule/"+t.schedule.id)}}}},79:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var n=i(1),s=a(n),o=i(52),r=a(o),l=i(49),c=a(l);s.default.component("vuetable",c.default),new s.default({el:"#schedule-list",render:function(t){return t(r.default)}})}},[79]);